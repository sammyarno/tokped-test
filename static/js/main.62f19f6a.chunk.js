(this["webpackJsonptokopedia-poke"]=this["webpackJsonptokopedia-poke"]||[]).push([[0],{128:function(e,t,n){},129:function(e,t,n){"use strict";n.r(t);var a=n(3),c=n(2),s=n(48),r=n.n(s),i=n(29),o=n(44),l=n(25),j=n(91),u=n(34),d=n(94),m=n(20),p=n(74),b=u.d,O=n(13),h="@@pokemon/GET_LOADING",x="@@pokemon/GET_DETAIL_LOADING",f="@@pokemon/CATCH_LOADING",v="@@pokemon/GET",k="@@pokemon/GET_DETAIL",g="@@pokemon/ERROR",N={getLoading:!1,getDetailLoading:!1,catchLoading:!1,data:[],meta:{count:0,next:null,previous:null},selected:{id:0,name:"",image:"",moves:[],stats:[],types:[]},errorMessage:""},y={total:0,data:[],errorMessage:""},w={router:{action:"POP",location:{hash:"",pathname:"",search:"",state:""}},pokemon:N,account:y},C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h:return Object(O.a)(Object(O.a)({},e),{},{getLoading:t.data});case x:return Object(O.a)(Object(O.a)({},e),{},{getDetailLoading:t.data});case f:return Object(O.a)(Object(O.a)({},e),{},{catchLoading:t.data});case v:return Object(O.a)(Object(O.a)({},e),{},{data:t.data,meta:t.meta});case k:return Object(O.a)(Object(O.a)({},e),{},{selected:t.data});case g:return Object(O.a)(Object(O.a)({},e),{},{errorMessage:t.data});default:return e}},E="@@account/SET_STORE",L="@@account/ERROR",S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case L:return Object(O.a)(Object(O.a)({},e),{},{errorMessage:t.data});case E:return Object(O.a)(Object(O.a)({},e),t.data);default:return e}},T=function(e){return Object(u.c)({router:Object(o.b)(e),pokemon:C,account:S})},_=Object(m.a)({basename:"/"}),I=[d.a,Object(p.a)(_)],F=b(u.a.apply(void 0,I)),A=Object(u.e)(T(_),w,F);_.listen((function(){window.scrollTo(0,0)}));var M=A,G=n(38),P=function(){return Object(a.jsxs)("div",{className:"navbar",children:[Object(a.jsx)("div",{className:"menu",children:Object(a.jsx)(G.a,{to:"/tokped-test",children:Object(a.jsx)("img",{src:"https://pokeapi.co/static/pokeapi_256.888baca4.png",alt:"logo"})})}),Object(a.jsx)("div",{className:"menu",children:Object(a.jsx)(G.a,{to:"/tokped-test/mypoke",children:Object(a.jsx)("h3",{children:"myPok\xe9"})})})]})},z=n(11),D=n(12),R=n.n(D),q=n(24),$=n(30),H=n(36),J=n(65);function Q(){var e=Object(J.a)(["\n  query pokemon($name: String!) {\n    pokemon(name: $name) {\n      id\n      name\n      image: sprites {\n        front_default\n      }\n      moves {\n        move {\n          name\n        }\n      }\n      types {\n        slot\n        type {\n          name\n        }\n      }\n      statuses: stats {\n        value: base_stat\n        stat {\n          name\n        }\n      }\n    }\n  }\n"]);return Q=function(){return e},e}function K(){var e=Object(J.a)(["\n  query pokemons($limit: Int, $offset: Int) {\n    pokemons(limit: $limit, offset: $offset) {\n      count\n      next\n      previous\n      results {\n        url\n        name\n        image\n      }\n    }\n  }\n"]);return K=function(){return e},e}var Y=Object(l.gql)(K()),B=Object(l.gql)(Q()),U=function(e){var t={limit:0,offset:0},n=e.split("?")[1];if(0!==n.length){var a=n.split("&");if(0!==a.length){var c=a[0].split("=");t.offset=parseInt(c[1]);var s=a[1].split("=");t.limit=parseInt(s[1])}}return t},V=function(){var e=Object(z.g)(),t=Object(c.useState)({limit:24,offset:0}),n=Object($.a)(t,2),s=n[0],r=n[1],o=Object(i.e)((function(e){return e.account})),j=Object(l.useLazyQuery)(Y,{variables:{limit:s.limit,offset:s.offset}}),u=Object($.a)(j,2),d=u[0],m=u[1],p=m.loading,b=m.data,O=m.error;Object(c.useEffect)((function(){d()}),[d]);var h=function(){var t=Object(q.a)(R.a.mark((function t(n){return R.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.push("/tokped-test/pokemon/".concat(n));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(a.jsxs)("div",{className:"home page",children:[Object(a.jsxs)("div",{className:"title",children:[Object(a.jsx)("h2",{children:"Pok\xe9mon List"}),Object(a.jsxs)("small",{children:["Owned Total: ",o.total]})]}),Object(a.jsx)("div",{className:"list",children:p?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("div",{}),Object(a.jsx)("div",{className:"spinner-container text-center",children:Object(a.jsx)(H.a,{icon:"spinner",size:"2x",spin:!0})}),Object(a.jsx)("div",{})]}):Object(a.jsx)(a.Fragment,{children:!b||O?Object(a.jsx)(a.Fragment,{children:Object(a.jsx)("p",{className:"text-center text-danger",children:"Fetch Error"})}):Object(a.jsx)(a.Fragment,{children:b.pokemons.results.map((function(e,t){return Object(a.jsxs)("div",{className:"item",role:"presentation",onClick:function(){return h(e.name)},children:[Object(a.jsx)("div",{className:"image-wrapper",children:Object(a.jsx)("img",{src:e.image,alt:"poke"})}),Object(a.jsx)("p",{className:"name",children:e.name}),Object(a.jsx)("p",{className:"status",children:Object(a.jsxs)("small",{className:"text-muted",children:["Owned: ",o.data.filter((function(t){return t.name===e.name})).length>0?o.data.filter((function(t){return t.name===e.name}))[0].nicknames.length:0]})})]},t)}))})})}),Object(a.jsxs)("div",{className:"extra",children:[Object(a.jsx)("button",{className:"prev",type:"button",disabled:!(null===b||void 0===b?void 0:b.pokemons.previous),onClick:function(){r(U((null===b||void 0===b?void 0:b.pokemons.previous)||"")),d()},children:Object(a.jsx)(H.a,{icon:"chevron-left",size:"2x"})}),Object(a.jsx)("button",{className:"next",type:"button",disabled:!(null===b||void 0===b?void 0:b.pokemons.next),onClick:function(){r(U((null===b||void 0===b?void 0:b.pokemons.next)||"")),d()},children:Object(a.jsx)(H.a,{icon:"chevron-right",size:"2x"})})]})]})},W="poke",X=function(){var e=null,t=localStorage.getItem(W);return t&&(e=JSON.parse(t)),e},Z=function(e){localStorage.setItem(W,JSON.stringify(e))},ee=n(66),te=n.n(ee),ne="https://pokeapi.co/api/v2",ae=function(){var e=Object(q.a)(R.a.mark((function e(t){var n;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,te.a.get("".concat(ne,"/pokemon/").concat(t));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ce=M.dispatch,se=function(e){return{type:g,data:e}},re=function(e){return{type:x,data:e}},ie=function(){var e=Object(q.a)(R.a.mark((function e(t){var n,a;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ce(re(!0)),e.prev=1,e.next=4,ae(t);case 4:return n=e.sent,a={id:n.data.id,name:n.data.name,image:n.data.sprites.front_default,moves:n.data.moves.map((function(e){return e.move.name})).sort(),stats:n.data.stats.map((function(e){return{name:e.stat.name,value:e.base_stat}})),types:n.data.types.map((function(e){return{slot:e.slot,name:e.type.name}}))},e.abrupt("return",{type:k,data:a});case 9:return e.prev=9,e.t0=e.catch(1),e.abrupt("return",se(e.t0.response?e.t0.response.message:"Failed get pokemon detail"));case 12:return e.prev=12,ce(re(!1)),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[1,9,12,15]])})));return function(t){return e.apply(this,arguments)}}(),oe=function(e,t){var n=!1,a=M.getState().account.data.filter((function(t){return t.name===e}));return 0!==a.length&&a[0].nicknames.includes(t)&&(n=!0),n},le=function(e,t){var n=M.getState().account;if(0===n.data.length){var a={name:e,nicknames:[t]};n.data=[a]}else if(!oe(e,t)){var c=n.data.filter((function(t){return t.name!==e})),s=n.data.filter((function(t){return t.name===e}));if(0!==s.length)s[0].nicknames.push(t);else{var r={name:e,nicknames:[t]};s.push(r)}n.data=c.concat(s[0])}return n.total+=1,Z(n),{type:"@@pokemon/CATCH_POKEMON"}},je=function(){var e=Object(i.d)(),t=Object(z.h)().name,n=Object(c.useState)(""),s=Object($.a)(n,2),r=s[0],o=s[1],j=Object(c.useState)(""),u=Object($.a)(j,2),d=u[0],m=u[1],p=Object(c.useState)(!1),b=Object($.a)(p,2),O=b[0],h=b[1],x=Object(c.useState)(!1),f=Object($.a)(x,2),v=f[0],k=f[1],g=Object(c.useState)(""),N=Object($.a)(g,2),y=N[0],w=N[1],C=Object(l.useLazyQuery)(B,{variables:{name:t}}),E=Object($.a)(C,2),L=E[0],S=E[1],T=S.loading,_=S.data,I=S.error,F=Object(c.useCallback)(Object(q.a)(R.a.mark((function n(){return R.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=e,n.next=3,ie(t);case 3:n.t1=n.sent,(0,n.t0)(n.t1);case 5:case"end":return n.stop()}}),n)}))),[e,t]);Object(c.useEffect)((function(){F(),L()}),[F]);var A=function(){var n=Object(q.a)(R.a.mark((function n(){return R.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(o(""),!oe(t,y)){n.next=5;break}o("Nickname has been registered"),n.next=13;break;case 5:return n.t0=e,n.next=8,le(t,y);case 8:n.t1=n.sent,(0,n.t0)(n.t1),m("See your new pok\xe9mon in myPoke"),setTimeout((function(){m("")}),3e3),h(!1);case 13:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),M=null===_||void 0===_?void 0:_.pokemon.types.map((function(e){return e.type.name})).join(", ");return Object(a.jsxs)("div",{className:"detail page",children:[d&&Object(a.jsx)("div",{className:"alert success",children:d}),!_||T?Object(a.jsx)("div",{className:"spinner-container text-center",children:Object(a.jsx)(H.a,{icon:"spinner",size:"2x",spin:!0})}):Object(a.jsx)(a.Fragment,{children:!_||I?Object(a.jsx)(a.Fragment,{children:Object(a.jsx)("p",{className:"text-center text-danger",children:"Fetch Error"})}):Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("div",{className:"image-wrapper",children:Object(a.jsx)("img",{src:_.pokemon.image.front_default||"",alt:"thumbnail",className:"image"})}),Object(a.jsxs)("div",{className:"title",children:[Object(a.jsx)("h2",{children:_.pokemon.name}),Object(a.jsx)("p",{children:M})]}),Object(a.jsxs)("div",{className:"status section",children:[Object(a.jsx)("h3",{children:"Status"}),Object(a.jsx)("div",{className:"list",children:_.pokemon.statuses.map((function(e,t){return Object(a.jsxs)("div",{className:"item",children:[Object(a.jsx)("p",{children:e.stat.name}),Object(a.jsx)("p",{className:"value",children:Object(a.jsx)("b",{children:e.value})})]},t)}))})]}),Object(a.jsxs)("div",{className:"moves section",children:[Object(a.jsx)("h3",{children:"Moves"}),Object(a.jsx)("div",{className:"list",children:_.pokemon.moves.map((function(e,t){return Object(a.jsx)("div",{className:"item",children:Object(a.jsx)("p",{children:e.move.name})},t)}))})]}),Object(a.jsxs)("div",{className:"extra",children:[r&&Object(a.jsx)("div",{className:"alert",children:r}),Object(a.jsx)("button",{className:"catch-btn",type:"button",onClick:function(){var e=Math.random();o(""),m(""),k(!0),setTimeout((function(){if(e<.5)return o("Your pokemon has fleed, try again!"),void k(!1);k(!1),window.scrollTo({behavior:"smooth",top:0}),o(""),h(!0)}),2e3)},disabled:v,children:Object(a.jsxs)("h2",{children:["CATCH ",v&&Object(a.jsx)(H.a,{icon:"spinner",spin:!0})]})})]})]})}),O&&Object(a.jsx)("div",{className:"modal",children:Object(a.jsxs)("div",{className:"content",children:[Object(a.jsx)("div",{className:"close",children:Object(a.jsx)(H.a,{icon:"times",size:"lg",onClick:function(){return h(!1)}})}),Object(a.jsxs)("h3",{children:["You've caught a ",t," !"]}),Object(a.jsx)("div",{className:"image-wrapper",children:Object(a.jsx)("img",{src:(null===_||void 0===_?void 0:_.pokemon.image.front_default)||"",alt:"thumbnail",className:"image"})}),Object(a.jsx)("p",{children:"Nickname"}),Object(a.jsx)("input",{type:"text",autoFocus:!0,onChange:function(e){w(e.target.value)},onKeyUp:function(e){13===e.keyCode&&A()}}),r&&Object(a.jsx)("p",{className:"error",children:Object(a.jsx)("small",{children:r})}),Object(a.jsx)("button",{type:"button",onClick:A,children:Object(a.jsx)("p",{children:Object(a.jsx)("b",{children:"SAVE"})})})]})})]})},ue=function(){var e=Object(z.g)(),t=Object(i.e)((function(e){return e.account})),n=function(){var t=Object(q.a)(R.a.mark((function t(n){return R.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.push("/tokped-test/pokemon/".concat(n));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(a.jsxs)("div",{className:"mypoke page",children:[Object(a.jsx)("div",{className:"title",children:Object(a.jsx)("h2",{children:"MyPok\xe9 List"})}),Object(a.jsx)("div",{className:"list",children:t.data.map((function(e){return Object(a.jsx)(a.Fragment,{children:e.nicknames.map((function(t){return Object(a.jsxs)("div",{className:"item",role:"presentation",onClick:function(){return n(e.name)},children:[Object(a.jsx)("p",{className:"nickname",children:t}),Object(a.jsx)("p",{className:"name",children:Object(a.jsx)("b",{children:e.name})})]},t)}))})}))})]})},de=function(){return Object(a.jsxs)(z.d,{children:[Object(a.jsx)(z.b,{exact:!0,path:"/tokped-test/",component:V}),Object(a.jsx)(z.b,{exact:!0,path:"/tokped-test/pokemon/:name",component:je}),Object(a.jsx)(z.b,{exact:!0,path:"/tokped-test/mypoke",component:ue}),Object(a.jsx)(z.b,{component:function(){return Object(a.jsx)(z.a,{to:"/tokped-test/"})}})]})},me=function(){return Object(a.jsxs)("div",{className:"app",children:[Object(a.jsx)(P,{}),Object(a.jsx)(de,{})]})},pe=n(39),be=n(42);pe.b.add(be.a,be.b,be.c,be.d,be.e);n(128);var Oe=Object(j.a)((function(e){var t=e.graphQLErrors;t&&t.map((function(e){var t=e.message;return console.log("GraphQL error: ".concat(t)),t}))})),he=Object(l.from)([Oe,new l.HttpLink({uri:"https://graphql-pokeapi.vercel.app/api/graphql"})]),xe=new l.ApolloClient({cache:new l.InMemoryCache,link:he});M.dispatch((X()||Z({data:[],total:0}),{type:E,data:X()})),r.a.render(Object(a.jsx)(i.a,{store:M,children:Object(a.jsx)(o.a,{history:_,children:Object(a.jsx)(l.ApolloProvider,{client:xe,children:Object(a.jsx)(me,{})})})}),document.getElementById("root"))}},[[129,1,2]]]);